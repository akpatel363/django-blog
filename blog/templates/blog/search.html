{% extends 'blog/main.html' %}
{% load blog_tags %}
{% block title %}
    <title>Search Posts</title>
{% endblock title %}
{% block content %}
    <form method="get" class="mt-3">
        {% csrf_token %}
        <div class="form-group">
            {{ form }}
        </div>
        <input type="submit" value="Search" class="btn btn-success">
    </form>
    {% if query %}
        <h3>Search Results for '{{ query }}'.</h3>
        <ul class="list-group">
            {% for post in results %}
                <li class="list-group-item">
                    <h2>{{ post.title }}</h2>
                    {% for tag in post.tags.all %}
                        <a href="{% url 'blog:post_list_by_tag' tag.slug %}" class="badge badge-pill badge-dark">{{ tag }}</a>
                    {% endfor %}
                    <h5>Published on {{ post.publish|date:'DATETIME_FORMAT' }}</h5>
                    <p>{{ post.body|markdown|truncatewords_html:30 }}</p>
                </li>
            {% empty %}
                <h4>No Posts Found.</h4>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock content %}